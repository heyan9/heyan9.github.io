<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½åšèœåŠ©æ‰‹ Pro</title>
    <style>
        :root {
            --primary: #ff6b6b; /* æ¢ä¸ªæ›´æœ‰é£Ÿæ¬²çš„é¢œè‰² */
            --secondary: #4ecdc4;
            --bg: #f7f7f7;
            --text: #2d3436;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 650px;
            margin: 0 auto;
            background: #fff;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            min-height: 85vh;
            position: relative;
        }

        h1, h2 { text-align: center; color: var(--primary); margin-bottom: 20px; }
        .subtitle { text-align: center; color: #888; font-size: 14px; margin-top: -10px; margin-bottom: 25px; }

        /* é¡µé¢åˆ‡æ¢ */
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* äººæ•°é€‰æ‹©æŒ‰é’® */
        .people-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid #eee;
            background: white;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        .people-btn:hover, .people-btn.selected {
            border-color: var(--primary);
            background: #fff0f0;
            color: var(--primary);
        }

        /* èœå“ç½‘æ ¼ */
        .dish-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 12px;
            max-height: 60vh;
            overflow-y: auto;
            padding: 5px;
        }

        .dish-check { display: none; }
        .dish-card {
            background: #f8f9fa;
            border: 1px solid #eee;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 50px;
        }
        .dish-check:checked + .dish-card {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: scale(1.05);
        }

        /* åº•éƒ¨åŠŸèƒ½æ  */
        .footer-bar {
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
        }
        .btn:hover { filter: brightness(0.95); }
        .btn-outline { background: white; color: #666; border: 1px solid #ddd; margin-top: 10px; box-shadow: none; }

        /* æ¸…å•åˆ—è¡¨ */
        .shop-list li {
            background: #f1f3f5;
            margin-bottom: 10px;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
        }
        .shop-list li span.amount { color: var(--primary); font-weight: bold; }

        /* çƒ¹é¥ªæ­¥éª¤å¡ç‰‡ */
        .recipe-card {
            border-bottom: 1px dashed #ddd;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        .recipe-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .recipe-name { font-size: 18px; font-weight: bold; color: #333; }
        .recipe-time { font-size: 12px; background: #eee; padding: 2px 6px; border-radius: 4px; color: #666; }
        
        .step-item {
            margin-bottom: 8px;
            font-size: 14px;
            position: relative;
            padding-left: 20px;
        }
        .step-item::before {
            content: "â€¢";
            color: var(--primary);
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .time-tag {
            color: var(--primary);
            font-weight: bold;
            font-size: 13px;
            margin-left: 5px;
        }

        .contact-info {
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #999;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- 1. äººæ•°é€‰æ‹©é¡µ -->
    <div id="page-people" class="page active">
        <h1>ç”¨é¤äººæ•°</h1>
        <p class="subtitle">è¯·é€‰æ‹©ç”¨é¤è§„æ¨¡ï¼ŒåŠ©æ‰‹å°†ä¸ºæ‚¨è®¡ç®—é£Ÿæé‡</p>
        
        <button class="people-btn" onclick="selectPeople(1)">ğŸ‘¤ 1 - 2 äºº<br><span style="font-size:12px;font-weight:normal">ç²¾è‡´å°ä»½ï¼Œä¸æµªè´¹</span></button>
        <button class="people-btn" onclick="selectPeople(2)">ğŸ‘¥ 3 - 4 äºº<br><span style="font-size:12px;font-weight:normal">æ ‡å‡†åˆ†é‡ï¼Œåˆšåˆšå¥½</span></button>
        <button class="people-btn" onclick="selectPeople(3)">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ 4 - 8 äºº<br><span style="font-size:12px;font-weight:normal">è±ªåå¤§ä»½ï¼Œéœ€å¤‡è¶³</span></button>
    </div>

    <!-- 2. é€‰èœé¡µ -->
    <div id="page-menu" class="page">
        <h2>ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ</h2>
        <p class="subtitle" id="people-display-text"></p>
        
        <div class="dish-grid" id="menu-grid">
            <!-- JS ç”Ÿæˆ -->
        </div>

        <div class="footer-bar">
            <button class="btn" onclick="gotoShop()">é€‰å¥½äº†ï¼Œç”Ÿæˆè´­ä¹°æ¸…å•</button>
            <button class="btn btn-outline" onclick="gotoPage('page-people')">è¿”å›é‡é€‰äººæ•°</button>
            <div class="contact-info">
                å¦‚æœ‰å…¶ä»–åŠ èœéœ€æ±‚è¯·è”ç³»ç”µè¯ï¼š<br>
                <a href="tel:18230058652" style="color:#ff6b6b;font-weight:bold;text-decoration:none">18230058652</a>
            </div>
        </div>
    </div>

    <!-- 3. è´­ç‰©æ¸…å•é¡µ -->
    <div id="page-shop" class="page">
        <h2>ğŸ›’ é‡‡è´­æ¸…å•</h2>
        <p class="subtitle">å·²æ ¹æ®äººæ•°è°ƒæ•´è´­ä¹°æ•°é‡</p>

        <h3 style="font-size:15px; margin-top:0;">ğŸ¥© ä¸»æ–™ (å¿…ä¹°)</h3>
        <ul class="shop-list" id="shop-main-list"></ul>

        <div style="background:#fff3cd; padding:10px; border-radius:8px; font-size:13px; margin-top:15px;">
            <strong>ğŸ§‚ æ£€æŸ¥è°ƒæ–™ (å®¶é‡Œé€šå¸¸æœ‰ï¼Œæ— éœ€å¤šä¹°)ï¼š</strong>
            <p id="shop-seasoning-list" style="margin:5px 0 0 0; color:#666;"></p>
        </div>

        <div class="footer-bar">
            <button class="btn" onclick="gotoCook()">ä¹°å¥½äº†ï¼Œå¼€å§‹çƒ¹é¥ª</button>
            <button class="btn btn-outline" onclick="gotoPage('page-menu')">è¿”å›åŠ èœ</button>
        </div>
    </div>

    <!-- 4. çƒ¹é¥ªæ­¥éª¤é¡µ -->
    <div id="page-cook" class="page">
        <h2>ğŸ‘¨â€ğŸ³ çƒ¹é¥ªæ—¶åˆ»</h2>
        <p class="subtitle">æ­¥éª¤å·²ç®€åŒ–ï¼Œè¯·ä¸¥æ ¼éµå®ˆæ—¶é—´</p>

        <div id="recipe-container"></div>

        <button class="btn btn-outline" onclick="location.reload()">å…¨éƒ¨å®Œæˆï¼Œé‡æ–°å¼€å§‹</button>
    </div>

</div>

<script>
    // === æ•°æ®ä¸­å¿ƒ ===
    // ç³»æ•°ï¼š1æ¡£=1.0, 2æ¡£=1.8, 3æ¡£=3.2
    let multiplier = 1; 
    let selectedDishIds = [];

    const dishes = [
        // åŸæœ‰èœå“
        { id: 1, name: "åœŸè±†çƒ§æ’éª¨", main: [{n:"æ’éª¨",q:400,u:"g"}, {n:"åœŸè±†",q:2,u:"ä¸ª"}], season: "å§œ,ç”ŸæŠ½,æ–™é…’,å†°ç³–,ç›", steps: ["æ’éª¨å†·æ°´ä¸‹é”…ç„¯æ°´3åˆ†é’Ÿæå‡º", "é”…çƒ­æ²¹åŒ–å†°ç³–ï¼Œä¸‹æ’éª¨ç‚’ç³–è‰²", "åŠ ç”ŸæŠ½æ–™é…’æ°´æ²¡è¿‡é£Ÿæï¼Œç‚–30åˆ†é’Ÿ", "åŠ åœŸè±†å—å†ç‚–15åˆ†é’Ÿ", "åŠ ç›å¤§ç«æ”¶æ±2åˆ†é’Ÿ"] },
        { id: 2, name: "è¾£æ¤’ç‚’è‚‰", main: [{n:"äº”èŠ±è‚‰",q:200,u:"g"}, {n:"èºä¸æ¤’",q:4,u:"ä¸ª"}], season: "è’œ,ç”ŸæŠ½,è€æŠ½,è±†è±‰", steps: ["é’æ¤’åˆ‡å—å¹²é”…ç…¸ç‚’è‡³è™çš®çŠ¶(çº¦2åˆ†é’Ÿ)ç››å‡º", "çƒ­æ²¹ç‚’è‚‰ç‰‡è‡³å‡ºæ²¹å·æ›²", "æ”¾è’œå’Œè±†è±‰çˆ†é¦™30ç§’", "å€’å…¥é’æ¤’ï¼ŒåŠ é…±æ²¹å¤§ç«æ··ç‚’1åˆ†é’Ÿ"] },
        { id: 3, name: "é…¸è¾£åœŸè±†ä¸", main: [{n:"åœŸè±†",q:2,u:"ä¸ª"}], season: "å¹²è¾£æ¤’,èŠ±æ¤’,è’œ,ç™½é†‹", steps: ["åœŸè±†åˆ‡ä¸æ³¡æ°´æ´—æ‰æ·€ç²‰", "çƒ­æ²¹çˆ†é¦™èŠ±æ¤’å¹²è¾£æ¤’è’œ", "å¤§ç«å€’å…¥åœŸè±†ä¸å¿«ç‚’2åˆ†é’Ÿ", "æ·‹å…¥ç™½é†‹å’Œç›ç¿»ç‚’30ç§’å‡ºé”…"] },
        { id: 4, name: "å¥¶é»„åŒ…", main: [{n:"é€Ÿå†»å¥¶é»„åŒ…",q:1,u:"åŒ…"}], season: "æ°´", steps: ["æ— éœ€è§£å†»ï¼Œç›´æ¥æ”¾å…¥è’¸ç¬¼", "æ°´å¼€åä¸­ç«è’¸8-10åˆ†é’Ÿ", "å…³ç«ç„–2åˆ†é’Ÿå†æ­ç›–"] },
        { id: 5, name: "è€å§œç‚’é¸¡", main: [{n:"é¸¡è‚‰",q:500,u:"g"}, {n:"è€å§œ",q:150,u:"g"}], season: "è’œ,ç”ŸæŠ½,æ–™é…’,ç›", steps: ["é¸¡å—åŠ ç›æ–™é…’è…Œåˆ¶10åˆ†é’Ÿ", "çƒ­æ²¹ç‚¸ç‚’é¸¡å—è‡³é‡‘é»„(çº¦5åˆ†é’Ÿ)ç››å‡º", "åŸé”…çˆ†é¦™å¤§é‡å§œç‰‡", "å›é”…é¸¡è‚‰ï¼ŒåŠ ç”ŸæŠ½å¤§ç«ç¿»ç‚’3åˆ†é’Ÿ"] },
        { id: 6, name: "å°ç‚’é»„ç‰›è‚‰", main: [{n:"ç‰›è‚‰",q:300,u:"g"}, {n:"å°ç±³è¾£",q:5,u:"ä¸ª"}], season: "é¦™èœ,è’œ,ç”ŸæŠ½,èšæ²¹,æ·€ç²‰", steps: ["ç‰›è‚‰åˆ‡ç‰‡åŠ èšæ²¹æ·€ç²‰è…Œåˆ¶", "çƒ­æ²¹æ»‘ç‚’ç‰›è‚‰30ç§’å˜è‰²å³æå‡º", "çˆ†é¦™è’œè¾£ï¼Œä¸‹ç‰›è‚‰å’Œé¦™èœ", "å¤§ç«çŒ›ç‚’20ç§’å‡ºé”…"] },
        { id: 7, name: "å°ç‚’çŒªè€³æœµ", main: [{n:"ç†ŸçŒªè€³",q:200,u:"g"}, {n:"é’æ¤’",q:2,u:"ä¸ª"}], season: "è’œ,ç”ŸæŠ½", steps: ["çŒªè€³åˆ‡ä¸ï¼Œé’æ¤’åˆ‡ä¸", "çƒ­æ²¹çˆ†è’œï¼Œä¸‹é’æ¤’ç‚’1åˆ†é’Ÿ", "ä¸‹çŒªè€³å¤§ç«ç¿»ç‚’2åˆ†é’Ÿ", "åŠ ç”ŸæŠ½è°ƒå‘³å‡ºé”…"] },
        { id: 8, name: "ç„–çŒªæ‰‹", main: [{n:"çŒªè¹„",q:2,u:"åª"}], season: "å§œ,å…«è§’,ç”ŸæŠ½,å†°ç³–", steps: ["çŒªè¹„ç„¯æ°´5åˆ†é’Ÿ", "ç‚’ç³–è‰²åä¸‹çŒªè¹„ç¿»ç‚’", "åŠ è°ƒæ–™å’Œè¶³é‡æ°´", "å°ç«ç„–ç…®80åˆ†é’Ÿ(æˆ–é«˜å‹é”…20åˆ†é’Ÿ)", "å¤§ç«æ”¶æ±5åˆ†é’Ÿ"] },
        { id: 9, name: "å»éª¨é¸­æŒ", main: [{n:"å»éª¨é¸­æŒ",q:300,u:"g"}, {n:"é…¸èåœ",q:100,u:"g"}], season: "è’œ,ç”ŸæŠ½,èšæ²¹,å¹²è¾£æ¤’", steps: ["é¸­æŒç…®ç†Ÿæå‡º", "çƒ­æ²¹ç‚’é¦™é…¸èåœå’Œè¾£æ¤’", "å€’å…¥é¸­æŒå¤§ç«ç‚’3åˆ†é’Ÿ", "åŠ èšæ²¹è°ƒå‘³å‡ºé”…"] },
        { id: 10, name: "ç ‚é”…å«©è±†è…", main: [{n:"å«©è±†è…",q:1,u:"ç›’"}, {n:"è‚‰æœ«",q:50,u:"g"}], season: "è±†ç“£é…±,è’œ,æ°´æ·€ç²‰,è‘±", steps: ["ç‚’é¦™è‚‰æœ«å’Œè±†ç“£é…±", "åŠ æ°´ç…®å¼€ï¼Œæ”¾å…¥è±†è…ç…®5åˆ†é’Ÿ", "æ·‹å…¥æ°´æ·€ç²‰å‹¾èŠ¡", "æ’’è‘±èŠ±å‡ºé”…"] },
        { id: 11, name: "æ¹˜è¾£è„†ç¬‹", main: [{n:"çƒŸç¬‹/è„†ç¬‹",q:300,u:"g"}, {n:"äº”èŠ±è‚‰ç‰‡",q:50,u:"g"}], season: "å°ç±³è¾£,è’œ,ç”ŸæŠ½,ç›", steps: ["ç¬‹ç‰‡ç„¯æ°´æ²¥å¹²", "ç…¸ç‚’è‚‰ç‰‡å‡ºæ²¹ï¼Œæ”¾è’œè¾£", "å€’å…¥ç¬‹ç‰‡å¤§ç«çˆ†ç‚’3åˆ†é’Ÿ", "åŠ ç”ŸæŠ½ç›è°ƒå‘³"] },
        { id: 12, name: "ä¸ç“œæ±¤", main: [{n:"ä¸ç“œ",q:1,u:"æ ¹"}, {n:"é¸¡è›‹",q:2,u:"ä¸ª"}], season: "å§œä¸,ç›,æ²¹", steps: ["ç…è·åŒ…è›‹ç››å‡º", "é”…åº•æ²¹ç‚’è½¯ä¸ç“œ1åˆ†é’Ÿ", "åŠ å¼€æ°´ç…®æ²¸æ±¤å˜ç™½", "æ”¾å…¥è›‹å’Œå§œä¸ç…®2åˆ†é’Ÿ"] },
        { id: 13, name: "å°ç‚’é¦™å¹²", main: [{n:"é¦™å¹²",q:6,u:"ç‰‡"}, {n:"èŠ¹èœ",q:50,u:"g"}], season: "çº¢æ¤’,è’œ,ç”ŸæŠ½", steps: ["é¦™å¹²åˆ‡æ¡ï¼ŒèŠ¹èœåˆ‡æ®µ", "çƒ­æ²¹ç…ç‚’é¦™å¹²1åˆ†é’Ÿ", "åŠ èŠ¹èœçº¢æ¤’å¤§ç«ç‚’2åˆ†é’Ÿ", "åŠ ç”ŸæŠ½ç›å‡ºé”…"] },
        { id: 14, name: "ç‚’è±†èŠ½èœ", main: [{n:"ç»¿è±†èŠ½",q:400,u:"g"}], season: "è’œ,å¹²è¾£æ¤’,é¦™é†‹,è‘±", steps: ["çƒ­æ²¹çˆ†é¦™è’œè¾£", "å¤§ç«å€’å…¥è±†èŠ½å¿«ç‚’1åˆ†é’Ÿ", "æ·‹é†‹åŠ ç›æ’’è‘±æ®µ", "ç¿»åŒ€ç«‹é©¬å‡ºé”…(é˜²å‡ºæ°´)"] },
        { id: 15, name: "ç…é¸¡è›‹/ç‚’è›‹", main: [{n:"é¸¡è›‹",q:3,u:"ä¸ª"}], season: "æ²¹,ç›", steps: ["é¸¡è›‹æ‰“æ•£åŠ ç›", "çƒ­æ²¹å¤§ç«å€’å…¥è›‹æ¶²", "å¿«é€Ÿåˆ’æ•£ç‚’ç†Ÿ(çº¦40ç§’)", "å–œæ¬¢è€çš„å¯ä»¥ç…1åˆ†é’Ÿ"] },
        { id: 16, name: "å°ç‚’ç™½èœ", main: [{n:"å°ç™½èœ",q:500,u:"g"}], season: "è’œ,å¹²è¾£æ¤’,çŒªæ²¹,é†‹", steps: ["çŒªæ²¹èåŒ–çˆ†é¦™è’œè¾£", "å…ˆç‚’èœå¸®1åˆ†é’Ÿ", "å†æ”¾èœå¶å¤§ç«ç‚’1åˆ†é’Ÿ", "è½¯å¡Œåæ·‹é†‹åŠ ç›"] },

        // æ–°å¢èœå“
        { id: 17, name: "å°é…¥è‚‰", main: [{n:"äº”èŠ±è‚‰/é‡Œè„Š",q:300,u:"g"}, {n:"çº¢è–¯æ·€ç²‰",q:100,u:"g"}], season: "èŠ±æ¤’,ç›,é¸¡è›‹,æ²¹", steps: ["è‚‰åˆ‡æ¡åŠ èŠ±æ¤’ç›è›‹æ¶²æ·€ç²‰æ‹ŒåŒ€", "æ²¹æ¸©6æˆçƒ­ä¸‹é”…ç‚¸3åˆ†é’Ÿå®šå‹", "å‡é«˜æ²¹æ¸©å¤ç‚¸40ç§’è‡³é‡‘é»„"] },
        { id: 18, name: "ç‚’èŠ±èœ", main: [{n:"æœ‰æœºèŠ±èœ",q:350,u:"g"}, {n:"äº”èŠ±è‚‰ç‰‡",q:50,u:"g"}], season: "å¹²è¾£æ¤’,è’œ,ç”ŸæŠ½", steps: ["èŠ±èœåˆ‡å°æœµç„¯æ°´1åˆ†é’Ÿ", "ç…¸ç‚’è‚‰ç‰‡å‡ºæ²¹åŠ è’œè¾£", "å€’å…¥èŠ±èœå¤§ç«ç¿»ç‚’3åˆ†é’Ÿ", "æ·‹ç”ŸæŠ½ç„¦è¾¹å‡ºé”…"] },
        { id: 19, name: "å¹²é”…åŒ…èœ", main: [{n:"åŒ…èœ",q:0.5,u:"ä¸ª"}, {n:"äº”èŠ±è‚‰ç‰‡",q:50,u:"g"}], season: "å¹²è¾£æ¤’,è’œ,è’¸é±¼è±‰æ²¹", steps: ["åŒ…èœæ‰‹æ’•ï¼Œè‚‰ç‰‡ç…¸ç‚’å‡ºæ²¹", "ä¸‹è’œè¾£çˆ†é¦™", "ä¸‹åŒ…èœå¤§ç«ç‚’è‡³å˜è½¯(çº¦3åˆ†é’Ÿ)", "æ·‹è±‰æ²¹è°ƒå‘³ï¼Œæœ€å¥½ç”¨é…’ç²¾ç‚‰ä¿æ¸©"] },
        { id: 20, name: "æµ·å¸¦æ±¤", main: [{n:"å¹²æµ·å¸¦/é²œæµ·å¸¦",q:100,u:"g"}, {n:"æ’éª¨/è‚‰ç‰‡",q:100,u:"g"}], season: "å§œ,ç›,è‘±", steps: ["æ’éª¨ç„¯æ°´", "åŠ æ°´å§œç‰‡ç…®30åˆ†é’Ÿ", "åŠ å…¥æµ·å¸¦å†ç…®15åˆ†é’Ÿ", "æ’’è‘±èŠ±åŠ ç›"] },
        { id: 21, name: "è‚‰ä¸¸æ±¤", main: [{n:"çŒªè‚‰é¦…",q:200,u:"g"}, {n:"é’èœ",q:100,u:"g"}], season: "å§œ,æ·€ç²‰,ç™½èƒ¡æ¤’,ç›", steps: ["è‚‰é¦…åŠ æ·€ç²‰ç›æ°´é¡ºæ—¶é’ˆæ…æ‰“ä¸ŠåŠ²", "æ°´å¾®å¼€æ—¶è™å£æŒ¤å…¥è‚‰ä¸¸", "ç…®è‡³æµ®èµ·(çº¦4åˆ†é’Ÿ)", "ä¸‹é’èœç…®1åˆ†é’ŸåŠ ç›èƒ¡æ¤’"] },
        { id: 22, name: "ç²‰ä¸ç…²", main: [{n:"é¾™å£ç²‰ä¸",q:2,u:"æŠŠ"}, {n:"è‚‰æœ«",q:50,u:"g"}], season: "è’œè“‰,è±†ç“£é…±,ç”ŸæŠ½,ç ‚é”…", steps: ["ç²‰ä¸æ³¡è½¯å«åœ¨ç ‚é”…åº•", "ç‚’é¦™è‚‰æœ«è±†ç“£é…±è’œè“‰åŠ æ°´ç…®å¼€", "æ±¤æ±å€’å…¥ç ‚é”…", "ä¸­å°ç«ç…²5åˆ†é’Ÿæ”¶æ±"] },
        { id: 23, name: "ç‚’è±†æ²«/è‚‰æœ«è±†è§’", main: [{n:"å››å­£è±†/é…¸è±†è§’",q:300,u:"g"}, {n:"è‚‰æœ«",q:100,u:"g"}], season: "è’œ,å¹²è¾£æ¤’,ç”ŸæŠ½", steps: ["è±†è§’åˆ‡ç¢æœ«", "ç‚’ç†Ÿè‚‰æœ«ç››å‡º", "åº•æ²¹ç‚’è±†è§’æœ«è‡³è¡¨çš®èµ·çš±(3-4åˆ†é’Ÿ)", "å€’å…¥è‚‰æœ«æ··ç‚’åŠ ç›"] },
        { id: 24, name: "ç‚’ç²‰çš®", main: [{n:"é²œç²‰çš®",q:300,u:"g"}, {n:"é¸¡è›‹",q:2,u:"ä¸ª"}], season: "éŸ­èœ/è èœ,è’œ,ç”ŸæŠ½", steps: ["ç²‰çš®åˆ‡å®½æ¡ï¼Œé¸¡è›‹ç‚’ç†Ÿç››å‡º", "çƒ­æ²¹ç‚’è’œä¸‹ç²‰çš®(å¦‚æœå¤ªå¹²åŠ ç‚¹æ°´)", "ç‚’é€æ˜åä¸‹é…èœå’Œè›‹", "å¤§ç«ç¿»ç‚’1åˆ†é’Ÿ"] },
        { id: 25, name: "è›‹ç‚’é¥­", main: [{n:"éš”å¤œç±³é¥­",q:1,u:"ç¢—"}, {n:"é¸¡è›‹",q:2,u:"ä¸ª"}], season: "è‘±èŠ±,ç›,æ²¹", steps: ["çƒ­é”…å†·æ²¹æ»‘æ•£é¸¡è›‹", "å€’å…¥ç±³é¥­é“²ç¢æŒ‰å‹", "å¤§ç«ä¸åœç¿»ç‚’3åˆ†é’Ÿè‡³ç²’ç²’åˆ†æ˜", "æ’’è‘±èŠ±ç›å‡ºé”…"] },
        { id: 26, name: "è›‹ç‚’ç±³ç²‰", main: [{n:"å¹²ç±³ç²‰",q:150,u:"g"}, {n:"é¸¡è›‹",q:1,u:"ä¸ª"}], season: "é’èœ,ç”ŸæŠ½,è€æŠ½", steps: ["ç±³ç²‰æå‰æ³¡è½¯ç…®ç†Ÿæ²¥å¹²", "ç‚’é¸¡è›‹å’Œé’èœ", "ä¸‹ç±³ç²‰åŠ ç”ŸæŠ½è€æŠ½è°ƒè‰²", "å¤§ç«å¿«ç‚’2åˆ†é’Ÿ(é˜²æ­¢ç²˜é”…)"] },
        { id: 27, name: "é…¸è¾£ç²‰", main: [{n:"çº¢è–¯ç²‰æ¡",q:100,u:"g"}, {n:"èŠ±ç”Ÿç±³",q:20,u:"g"}], season: "é™ˆé†‹,è¾£æ¤’æ²¹,ç”ŸæŠ½,æ¦¨èœ", steps: ["ç²‰æ¡ç…®è½¯æå…¥ç¢—ä¸­", "ç¢—åº•æ”¾é†‹ã€é…±æ²¹ã€è¾£æ¤’æ²¹ã€æ±¤", "åŠ å…¥ç²‰æ¡", "æ’’æ¦¨èœèŠ±ç”Ÿè‘±èŠ±"] },
        { id: 28, name: "èºè›³ç²‰", main: [{n:"è¢‹è£…èºè›³ç²‰",q:1,u:"åŒ…"}], season: "æ°´", steps: ["ç±³ç²‰å†·æ°´ä¸‹é”…ç…®10åˆ†é’Ÿæå‡º", "å¦çƒ§æ°´æ”¾å…¥æ±¤æ–™åŒ…", "åŠ å…¥ç±³ç²‰ç…®2åˆ†é’Ÿ", "æ”¾å…¥èŠ±ç”Ÿè…ç«¹è¾£æ²¹"] },
        { id: 29, name: "æ„é¢", main: [{n:"æ„å¤§åˆ©é¢",q:150,u:"g"}, {n:"è‚‰é…±åŒ…/ç•ªèŒ„è‚‰æœ«",q:1,u:"ä»½"}], season: "ç›,æ²¹,é»‘èƒ¡æ¤’", steps: ["æ°´å¼€åŠ ç›æ²¹ç…®æ„é¢8-10åˆ†é’Ÿ", "æå‡ºæ²¥å¹²", "æ‹Œå…¥åŠ çƒ­çš„è‚‰é…±", "æ’’é»‘èƒ¡æ¤’æ‹ŒåŒ€"] },
        { id: 30, name: "ç‰›æ’", main: [{n:"ç‰›æ’",q:1,u:"å—"}], season: "é»„æ²¹,é»‘èƒ¡æ¤’,æµ·ç›", steps: ["ç‰›æ’è§£å†»å¸å¹²æ°´ä»½", "çƒ­é”…èåŒ–é»„æ²¹", "å¤§ç«æ¯é¢ç…2åˆ†é’Ÿ(è§†åšåº¦)", "é™ç½®é†’è‚‰3åˆ†é’Ÿå†åƒ"] },
        { id: 31, name: "å’–å–±é¥­", main: [{n:"å’–å–±å—",q:2,u:"å—"}, {n:"é¸¡è‚‰/ç‰›è‚‰",q:200,u:"g"}, {n:"åœŸè±†èƒ¡èåœ",q:1,u:"ä»½"}], season: "æ´‹è‘±,æ²¹", steps: ["ç‚’é¦™æ´‹è‘±å’Œè‚‰å—", "åŠ åœŸè±†èƒ¡èåœå—ç¿»ç‚’", "åŠ æ°´æ²¡è¿‡é£Ÿæç‚–10åˆ†é’Ÿ", "å…³ç«åŠ å’–å–±å—èåŒ–", "å¼€å°ç«ç…®æµ“ç¨ "] },
        { id: 32, name: "ç›é…¥é¸¡", main: [{n:"é¸¡èƒ¸è‚‰",q:300,u:"g"}], season: "æ¤’ç›ç²‰,æ·€ç²‰,äº”é¦™ç²‰,ä¹å±‚å¡”(å¯é€‰)", steps: ["é¸¡è‚‰åˆ‡å—åŠ äº”é¦™ç²‰é…±æ²¹è…Œåˆ¶", "è£¹åœ°ç“œç²‰é™ç½®", "æ²¹æ¸©160åº¦ç‚¸3åˆ†é’Ÿ", "å¤ç‚¸30ç§’æ’’æ¤’ç›"] },
        { id: 33, name: "é¦™è¾£é¸¡ç¿…", main: [{n:"é¸¡ç¿…ä¸­",q:6,u:"ä¸ª"}], season: "å¹²è¾£æ¤’,èŠ±æ¤’,å§œè’œ,ç†ŸèŠéº»", steps: ["é¸¡ç¿…å¯¹åŠåˆ‡ï¼Œç‚¸ç†Ÿ(çº¦6åˆ†é’Ÿ)", "é”…ç•™åº•æ²¹çˆ†é¦™å¤§é‡èŠ±æ¤’è¾£æ¤’", "å€’å…¥é¸¡ç¿…ç¿»ç‚’2åˆ†é’Ÿ", "æ’’èŠéº»å‡ºé”…"] },
        { id: 34, name: "è›‹æŒ", main: [{n:"é€Ÿå†»è›‹æŒçš®",q:6,u:"ä¸ª"}, {n:"è›‹æŒæ¶²",q:1,u:"ç›’"}], season: "æ— ", steps: ["çƒ¤ç®±é¢„çƒ­200åº¦", "è›‹æŒæ¶²å€’å…¥çš®ä¸­(8åˆ†æ»¡)", "ä¸­å±‚çƒ¤20-25åˆ†é’Ÿ", "è¡¨é¢å‡ºç°ç„¦ç³–æ–‘ç‚¹å³å¯"] },
        { id: 35, name: "çƒ¤è‚ ", main: [{n:"ç«å±±çŸ³çƒ¤è‚ ",q:4,u:"æ ¹"}], season: "æ²¹", steps: ["é¦™è‚ è§£å†»åˆ’åˆ€èŠ±", "å¹³åº•é”…å°‘æ²¹å°ç«æ…¢ç…", "ä¸åœç¿»åŠ¨çº¦6-8åˆ†é’Ÿ", "è¡¨çš®çˆ†å¼€ç„¦é»„å³å¯"] }
    ];

    // === é€»è¾‘æ§åˆ¶ ===

    function selectPeople(type) {
        document.querySelectorAll('.people-btn').forEach(b => b.classList.remove('selected'));
        event.currentTarget.classList.add('selected');
        
        let text = "";
        if(type === 1) { multiplier = 1; text = "å½“å‰æ¨¡å¼ï¼š1-2äºº (ç²¾ç®€ä»½é‡)"; }
        if(type === 2) { multiplier = 1.8; text = "å½“å‰æ¨¡å¼ï¼š3-4äºº (æ ‡å‡†ä»½é‡)"; }
        if(type === 3) { multiplier = 3.2; text = "å½“å‰æ¨¡å¼ï¼š4-8äºº (èšé¤ä»½é‡)"; }
        
        document.getElementById('people-display-text').innerText = text;
        renderMenu();
        gotoPage('page-menu');
    }

    function renderMenu() {
        const grid = document.getElementById('menu-grid');
        grid.innerHTML = '';
        dishes.forEach(dish => {
            const div = document.createElement('div');
            // æ£€æŸ¥æ˜¯å¦ä¹‹å‰é€‰è¿‡ï¼Œä¿æŒé€‰ä¸­çŠ¶æ€
            const checkedStr = selectedDishIds.includes(dish.id) ? 'checked' : '';
            div.innerHTML = `
                <input type="checkbox" id="d-${dish.id}" class="dish-check" value="${dish.id}" ${checkedStr}>
                <label for="d-${dish.id}" class="dish-card">${dish.name}</label>
            `;
            grid.appendChild(div);
        });
    }

    function gotoShop() {
        // è·å–é€‰ä¸­çš„èœ
        const checks = document.querySelectorAll('.dish-check:checked');
        if (checks.length === 0) { alert('è¯·è‡³å°‘é€‰ä¸€é“èœï¼'); return; }
        
        selectedDishIds = Array.from(checks).map(c => parseInt(c.value));
        renderShopList();
        gotoPage('page-shop');
    }

    function renderShopList() {
        const listEl = document.getElementById('shop-main-list');
        const seasonEl = document.getElementById('shop-seasoning-list');
        listEl.innerHTML = '';
        
        let allSeasons = new Set();
        let aggregatedMain = {}; // ç®€å•çš„åŒåé£Ÿæåˆå¹¶é€»è¾‘

        selectedDishIds.forEach(id => {
            const dish = dishes.find(d => d.id === id);
            
            // å¤„ç†ä¸»æ–™
            dish.main.forEach(m => {
                let finalQ = Math.ceil(m.q * multiplier); // è®¡ç®—ä»½é‡
                
                // ç®€å•çš„åˆå¹¶æ˜¾ç¤ºï¼Œå¦‚æœæƒ³åšå¤æ‚åˆå¹¶éœ€è¦æ›´ä¸¥æ ¼çš„æ•°æ®ç»“æ„
                // è¿™é‡Œä¸ºäº†å±•ç¤ºæ¸…æ™°ï¼Œç›´æ¥é€ä¸ªç½—åˆ—ï¼Œä½†åœ¨å‰é¢åŠ ä¸Šèœå
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>${dish.name} - ${m.n}</span>
                    <span class="amount">${finalQ}${m.u}</span>
                `;
                listEl.appendChild(li);
            });

            // å¤„ç†è°ƒæ–™
            if(dish.season && dish.season !== "æ— ") {
                dish.season.split(/[,ï¼Œ]/).forEach(s => allSeasons.add(s.trim()));
            }
        });

        seasonEl.innerText = Array.from(allSeasons).join('ã€ ') || "æ— éœ€é¢å¤–è°ƒæ–™";
    }

    function gotoCook() {
        const container = document.getElementById('recipe-container');
        container.innerHTML = '';

        selectedDishIds.forEach(id => {
            const dish = dishes.find(d => d.id === id);
            const card = document.createElement('div');
            card.className = 'recipe-card';
            
            // ç”Ÿæˆæ­¥éª¤HTML
            let stepsHtml = '';
            dish.steps.forEach(step => {
                // é«˜äº®æ—¶é—´
                const stepWithTime = step.replace(/(\d+[-~]?\d*[åˆ†ç§’])/g, '<span class="time-tag">$1</span>');
                stepsHtml += `<div class="step-item">${stepWithTime}</div>`;
            });

            card.innerHTML = `
                <div class="recipe-header">
                    <span class="recipe-name">${dish.name}</span>
                    <span class="recipe-time">çº¦ ${dish.steps.length * 3 + 5} åˆ†é’Ÿ</span>
                </div>
                <div>${stepsHtml}</div>
            `;
            container.appendChild(card);
        });

        gotoPage('page-cook');
    }

    function gotoPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        window.scrollTo(0,0);
    }
</script>

</body>
</html>