<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥æˆ‘ä»¬çš„æ¡‚å®å®æœ‰ä¸ªå®Œç¾çš„åœ£è¯èŠ‚</title>
    <style>
        :root {
            --gold: #ffd700;
            --dark-green: #064e3b;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #000; 
            color: white; font-family: 'STKaiti', 'Microsoft YaHei', serif;
            overflow: hidden;
        }

        /* æ…¢æ…¢äº®èµ·çš„å¼€åœº */
        .scene {
            width: 100%; height: 100%;
            background: 
                radial-gradient(circle at bottom, #4a1212 0%, #000 80%),
                url('https://images.unsplash.com/photo-1543589077-47d81606c1bf?auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center;
            opacity: 0; transition: opacity 4s ease-in-out;
            display: flex; flex-direction: column; align-items: center;
        }
        .scene.active { opacity: 1; }

        .header-msg {
            margin-top: 40px; text-align: center; z-index: 10;
            text-shadow: 0 0 15px var(--gold);
        }
        .header-msg h1 { font-size: 2rem; margin: 0; color: var(--gold); letter-spacing: 2px; }

        /* åœ£è¯æ ‘åŒºåŸŸ */
        .tree-area {
            position: relative;
            width: 450px; height: 600px;
            margin-top: 10px;
            display: flex; justify-content: center;
        }
        .tree-svg { width: 100%; height: 100%; filter: drop-shadow(0 0 25px var(--dark-green)); }

        /* ç…§ç‰‡çƒ - è£…é¥°æ•ˆæœ */
        .ornament {
            position: absolute;
            width: 60px; height: 60px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            box-shadow: 0 0 15px var(--gold), inset 0 0 10px rgba(0,0,0,0.5);
            overflow: hidden; cursor: pointer;
            z-index: 20; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: #fff;
            animation: swing 3s infinite ease-in-out;
        }
        .ornament:hover { transform: scale(1.4) rotate(5deg); z-index: 100; box-shadow: 0 0 25px #fff; }
        .ornament img { width: 100%; height: 100%; object-fit: cover; }

        /* åº•éƒ¨å€’è®¡æ—¶/ç¥ç¦è¯­å®¹å™¨ */
        .footer-container {
            position: absolute; bottom: 30px;
            text-align: center; background: rgba(0,0,0,0.7);
            padding: 15px 40px; border-radius: 50px;
            border: 1px solid var(--gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
            z-index: 50;
        }
        .timer { font-size: 1.6rem; font-weight: bold; color: var(--gold); }
        .status-text { font-size: 1rem; color: #eee; margin-bottom: 5px; }

        /* é›ªèŠ±æ•ˆæœ */
        .snowflake {
            position: absolute; top: -10px; color: white;
            user-select: none; pointer-events: none;
            animation: fall linear infinite; z-index: 5;
        }

        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }
        @keyframes swing { 
            0%, 100% { transform: rotate(-3deg); } 
            50% { transform: rotate(3deg); } 
        }

        /* å¼¹çª—æŸ¥çœ‹è¯¦æƒ… */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center;
        }
        .modal img { max-width: 90%; max-height: 85%; border: 4px solid #fff; border-radius: 10px; box-shadow: 0 0 30px var(--gold); }

        @media (max-width: 600px) {
            .tree-area { width: 320px; height: 450px; }
            .header-msg h1 { font-size: 1.3rem; }
            .ornament { width: 45px; height: 45px; }
        }
    </style>
</head>
<body>

    <div class="scene" id="mainScene">
        <div class="header-msg">
            <h1>ç¥æˆ‘ä»¬çš„æ¡‚å®å®æœ‰ä¸ªå®Œç¾çš„åœ£è¯èŠ‚ï¼Œçˆ±ä½  â¤ï¸</h1>
        </div>

        <div class="tree-area">
            <svg class="tree-svg" viewBox="0 0 200 260">
                <!-- æ ‘å¹² -->
                <rect x="92" y="210" width="16" height="40" fill="#311c04" />
                <!-- æ ‘å¶å±‚çº§ -->
                <path d="M100 10 L135 65 L120 65 L160 125 L140 125 L185 210 L15 210 L60 125 L40 125 L80 65 L65 65 Z" fill="#064e3b" />
                <!-- æ ‘é¡¶æ˜Ÿ -->
                <path d="M100 5 L104 15 L115 15 L107 22 L110 32 L100 26 L90 32 L93 22 L85 15 L96 15 Z" fill="gold" />
            </svg>
            <div id="ballsGallery"></div>
        </div>

        <div class="footer-container">
            <div class="status-text" id="statusLabel">æ­£åœ¨åŠ è½½æ¸©æš–...</div>
            <div class="timer" id="countdownDisplay">-- : -- : --</div>
        </div>
    </div>

    <div class="modal" id="modal" onclick="this.style.display='none'">
        <img id="modalImg" src="">
    </div>

    <script>
        window.onload = () => {
            // 1. å¼€åœºå…‰çº¿äº®èµ·
            setTimeout(() => {
                document.getElementById('mainScene').classList.add('active');
            }, 500);

            // 2. è‡ªåŠ¨æ¢æµ‹å¹¶åŠ è½½å›¾ç‰‡ (1.jpg, 2.jpg...)
            const gallery = document.getElementById('ballsGallery');
            const layers = [
                {t: 60,  w: 40}, {t: 110, w: 80}, {t: 160, w: 120}, {t: 210, w: 180}, {t: 280, w: 220}, {t: 350, w: 260}
            ];

            function tryLoadImage(index) {
                const imgPath = `imgsd/${index}.jpg`;
                const imgChecker = new Image();
                imgChecker.src = imgPath;
                
                imgChecker.onload = () => {
                    // å›¾ç‰‡å­˜åœ¨ï¼Œåˆ›å»ºè£…é¥°çƒ
                    const ball = document.createElement('div');
                    ball.className = 'ornament';
                    
                    // éšæœºåˆ†é…åˆ°æ ‘çš„ä¸€å±‚èŒƒå›´å†…
                    const layer = layers[Math.floor(Math.random() * layers.length)];
                    const top = layer.t + (Math.random() * 50);
                    // 225æ˜¯å®¹å™¨ä¸­å¿ƒ
                    const left = 225 + (Math.random() * layer.w - layer.w/2) - 30; 

                    ball.style.top = top + 'px';
                    ball.style.left = left + 'px';
                    ball.style.animationDelay = (Math.random() * 2) + 's';
                    
                    ball.innerHTML = `<img src="${imgPath}">`;
                    ball.onclick = () => {
                        document.getElementById('modalImg').src = imgPath;
                        document.getElementById('modal').style.display = 'flex';
                    };
                    gallery.appendChild(ball);
                    
                    // ç»§ç»­å°è¯•ä¸‹ä¸€å¼ 
                    tryLoadImage(index + 1);
                };
                imgChecker.onerror = () => {
                    console.log(`åŠ è½½å®Œæˆï¼Œå…±æ¢æµ‹åˆ° ${index-1} å¼ å›¾ç‰‡`);
                };
            }

            tryLoadImage(1); // ä»1.jpgå¼€å§‹æ¢æµ‹

            // 3. åœ£è¯èŠ‚çŠ¶æ€/å€’è®¡æ—¶é€»è¾‘
            function updateClock() {
                const now = new Date();
                const year = now.getFullYear();
                const christmas = new Date(year, 11, 25); // 11ä»£è¡¨12æœˆ
                
                const label = document.getElementById('statusLabel');
                const display = document.getElementById('countdownDisplay');

                // å¦‚æœä»Šå¤©æ˜¯12æœˆ25æ—¥
                if (now.getMonth() === 11 && now.getDate() === 25) {
                    label.innerText = "Today is the Day!";
                    display.innerText = "ğŸ„ åœ£è¯å¿«ä¹ï¼æˆ‘çš„æ¡‚å®å® ğŸ";
                    display.style.color = "#ff4d4d";
                } 
                // å¦‚æœåœ£è¯èŠ‚è¿˜æ²¡åˆ°
                else if (now < christmas) {
                    label.innerText = "è·ç¦»åœ£è¯èŠ‚å¼€å¯è¿˜æœ‰";
                    const diff = christmas - now;
                    const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
                    const m = Math.floor((diff / 1000 / 60) % 60);
                    const s = Math.floor((diff / 1000) % 60);
                    display.innerText = `${d}å¤© ${h}æ—¶ ${m}åˆ† ${s}ç§’`;
                } 
                // å¦‚æœåœ£è¯èŠ‚å·²ç»è¿‡äº†
                else {
                    label.innerText = "æ¸©æš–å»¶ç»­ä¸­";
                    display.innerText = "â¤ï¸ åœ£è¯å¿«ä¹ï¼Œæ¯ä¸€å¤©éƒ½çˆ±ä½  â¤ï¸";
                }
            }
            setInterval(updateClock, 1000);
            updateClock();

            // 4. ä¸‹é›ªèƒŒæ™¯
            setInterval(() => {
                const snow = document.createElement('div');
                snow.className = 'snowflake';
                snow.innerHTML = 'â„';
                snow.style.left = Math.random() * 100 + 'vw';
                snow.style.fontSize = (Math.random() * 10 + 10) + 'px';
                snow.style.opacity = Math.random();
                snow.style.animationDuration = (Math.random() * 3 + 4) + 's';
                document.body.appendChild(snow);
                setTimeout(() => snow.remove(), 7000);
            }, 200);
        };
    </script>
</body>
</html>
